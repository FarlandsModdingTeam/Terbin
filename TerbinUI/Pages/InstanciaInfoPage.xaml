<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="TerbinUI.Pages.InstanciaInfoPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Grid>
        <ScrollViewer>
            <StackPanel Padding="16" Spacing="16">
                <TextBlock Text="Informaci&#xF3;n de la instancia" Style="{StaticResource TitleTextBlockStyle}" />

                <StackPanel Spacing="4">
                    <TextBlock Text="Nombre" FontWeight="SemiBold" />
                    <TextBlock x:Name="TxtName" />
                </StackPanel>
                <StackPanel Spacing="4">
                    <TextBlock Text="Ruta" FontWeight="SemiBold" />
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock x:Name="TxtPath" TextTrimming="CharacterEllipsis" />
                        <Button Content="Abrir" Click="OnOpenPathClick" />
                    </StackPanel>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button Content="Ejecutar" Click="OnExecuteClick" />
                    <Button Content="Eliminar" Click="OnDeleteClick" />
                </StackPanel>

                <StackPanel Spacing="8">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Center" Spacing="8">
                        <TextBlock Text="Mods instalados" FontWeight="SemiBold" VerticalAlignment="Center" />
                        <Button Content="Agregar mod" Click="OnAddModClick" />
                    </StackPanel>
                    <GridView x:Name="ModsList" IsItemClickEnabled="True" ItemClick="OnModItemClick" SelectionMode="None" >
                        <GridView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsWrapGrid Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </GridView.ItemsPanel>
                        <GridView.ItemTemplate>
                            <DataTemplate>
                                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" Padding="12" Margin="6" CornerRadius="8">
                                    <TextBlock Text="{Binding Name}" TextWrapping="WrapWholeWords" Width="160"/>
                                </Border>
                            </DataTemplate>
                        </GridView.ItemTemplate>
                    </GridView>
                    <TextBlock x:Name="TxtNoMods" Text="(Sin datos de mods)" Opacity="0.6" Visibility="Collapsed" />
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- Floating back-to-list button (bottom-left) -->
        <Button HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="16" Click="OnGoHomeClick">
            <SymbolIcon Symbol="Back"/>
        </Button>

        <!-- Busy overlay for adding mod -->
        <Grid x:Name="BusyOverlay" Background="#66000000" Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12" Width="420">
                <TextBlock Text="Agregando mod..." HorizontalAlignment="Center"/>
                <ProgressBar IsIndeterminate="True"/>
            </StackPanel>
        </Grid>
    </Grid>
</Page>
